#include<stdio.h>
#include<TXLib.h>
#include<math.h>

enum number_of_solutions {NO_SOLUTIONS, ONE_SOLUTION,
TWO_SOLUTIONS, INF_number_of_solutions};
enum number_of_solutions flag;

bool is_variable_equal_to_zero(double val);
void enter_se_parameters(double *a, double *b, double *c);
void solve_square_equation(double a, double b, \
double c, double *x1, double *x2, number_of_solutions *flag);
void print_solutions(double x1, double x2,
number_of_solutions flag);

const double EPS = 0.0000001;

int main() {
    double a = NAN, b = NAN, c = NAN; // коэффициенты кв. ур.
    double x1 = NAN, x2 = NAN; // корни

    enter_se_parameters(&a, &b, &c);
    solve_square_equation(a, b, c, &x1, &x2, &flag);
    print_solutions(x1, x2, flag);

    return 0;
}

bool is_variable_equal_to_zero(double val) {
    return (fabs(val) < EPS);
}

void enter_se_parameters(double *a, double *b, double *c) {
    printf("Введите значения коэффициентов\n");

    printf("Первый коэффициент: ");
    scanf("%lf", a);

    printf("Второй коэффициент: ");
    scanf("%lf", b);

    printf("Третий коэффициент: ");
    scanf("%lf", c);
}

void solve_square_equation(double a, double b, double c,
double *x1, double *x2, number_of_solutions *flag) {
    double discriminant = NAN;

    if (is_variable_equal_to_zero(a) &&
    is_variable_equal_to_zero(b) &&
    is_variable_equal_to_zero(c)) {
        *flag = INF_number_of_solutions; // бесконечное количество корней
    }
    else if (is_variable_equal_to_zero(a) &&
    is_variable_equal_to_zero(b) &&
    !is_variable_equal_to_zero(c)) {
        *flag = NO_SOLUTIONS; // нет корней
    }
    else if (is_variable_equal_to_zero(a) &&
    !is_variable_equal_to_zero(b) &&
    !is_variable_equal_to_zero(c)) {
        *flag = ONE_SOLUTION; // один корень
        *x1 = *x2 = -c/b;
    }
    else {
        discriminant = b*b - 4*a*c;
        if (discriminant >= EPS) {
            *x1 = (-b + sqrt(discriminant))/(2*a);
            *x2 = (-b - sqrt(discriminant))/(2*a);
            *flag = TWO_SOLUTIONS; // два корня
        }
        else if (is_variable_equal_to_zero(discriminant)) {
            *x1 = *x2 = -b/(2*a);
            *flag = ONE_SOLUTION; //один корень
        }
        else {
            *flag = NO_SOLUTIONS; //нет корней
        }
    }
}

void print_solutions(double x1, double x2,
number_of_solutions flag) {
    if (flag == NO_SOLUTIONS)
        printf("Нет корней");

    else if (flag == ONE_SOLUTION)
        printf("Один корень: %lf", x1);

    else if (flag == TWO_SOLUTIONS)
        printf("Два корня: %lf %lf", x1, x2);

    else if (flag == INF_number_of_solutions)
        printf("Бесконечное количество корней");
    else
        printf("Error");
}
